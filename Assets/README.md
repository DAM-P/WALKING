# Cube Parkour - 跑酷游戏

## 项目概述

**项目名称**：Cube Parkour  
**游戏类型**：3D 跑酷 (3D Parkour)  
**平台**：PC (Windows)  
**视角**：第三人称  
**引擎**：Unity3D + DOTS/ECS

---

## 核心玩法

### 游戏理念
这是一款融合了跑酷动作与环境操控的3D跑酷游戏。玩家不仅需要灵活的操作技巧进行跑酷，还能通过操控场景中的Cube来辅助自己的移动，创造更快、更流畅的跑酷路线。

### 核心机制

#### 1. 跑酷系统
**基础移动**
- 前进/后退/左右移动
- 跳跃（支持二段跳）
- 冲刺/加速

**高级动作**
- **贴墙跑 (Wall Run)**
  - 在墙面上快速奔跑
  - 可在墙面上转向
  - 有时间限制，需及时跳离
  - 可连续在多个墙面间切换

- **跳跃系统**
  - 普通跳跃
  - 二段跳
  - 墙面跳跃（从墙面弹射）
  - 冲刺跳（更远的跳跃距离）

#### 2. Cube操控系统（简化版）

玩家可以操控场景中的Cube来辅助跑酷，但操作被简化为两种核心能力：

**拉伸 (Extend)**
- 选中一个Cube后，可以将其向指定方向拉伸
- 用途：
  - 创建临时平台跨越鸿沟
  - 延长跑道
  - 制造墙面供贴墙跑
  - 创建跳板
- 限制：
  - 有最大拉伸长度
  - 拉伸速度有限
  - 同时只能拉伸有限数量的Cube

**收缩 (Retract)**
- 将已拉伸的Cube收回原位
- 用途：
  - 清理障碍物
  - 回收Cube以便在新位置使用
  - 创造动态路线变化
- 特性：
  - 收缩速度快于拉伸
  - 可一键收回所有已操作的Cube

#### 3. 操作方式

**移动控制**
- WASD：移动
- Space：跳跃（在墙面时为墙跳）
- Shift：冲刺
- Ctrl：下蹲/滑铲（可选）

**Cube操控**
- 鼠标左键：选中Cube
- E键：拉伸选中的Cube
- Q键：收缩选中的Cube
- R键：收回所有操作的Cube

**视角控制**
- 鼠标移动：控制视角
- 滚轮：调整视距（可选）

---

## 游戏特色

### 1. 流畅的跑酷体验
- 精心设计的物理系统，确保移动流畅自然
- 贴墙跑、跳跃等动作无缝衔接
- 速度感与节奏感并重

### 2. 策略性环境操控
- 在高速移动中快速判断和操控Cube
- 在正确的时机拉伸/收缩Cube来优化路线
- 寻找最优路径与最快完成时间

### 3. 动态关卡设计
- 环境会随着玩家的操作而改变
- 多种解法，鼓励玩家探索不同路线
- 计时系统鼓励玩家追求速通

---

## 关卡设计

### 教学关卡
- 学习基础移动和跳跃
- 学习贴墙跑
- 学习Cube拉伸与收缩

### 初级关卡
- 简单的跑酷路线
- 需要基本的Cube操控辅助
- 引导玩家熟悉操作

### 中级关卡
- 需要连续的贴墙跑
- 需要在移动中操控Cube
- 引入计时挑战

### 高级关卡
- 复杂的跑酷路线组合
- 需要精确的时机把握
- 多条可选路线
- 追求最短完成时间

---

## 技术架构

### Unity DOTS/ECS
- 使用ECS架构管理大量Cube
- 高性能的物理模拟
- 流畅的帧率表现

### 核心系统

**角色控制器**
- 基于CharacterController的定制控制器
- 支持墙面检测和贴墙跑
- 流畅的动画过渡

**Cube管理系统**
- 使用对象池管理Cube
- 高效的选中和高亮系统
- 拉伸/收缩动画系统

**关卡系统**
- 计时系统
- 检查点系统
- 关卡重置功能

**相机系统**
- 跟随角色的第三人称相机
- 动态FOV调整（根据速度）
- 碰撞避免

---

## 美术风格

### 极简Low-Poly风格
- 清晰的视觉效果，便于高速移动中判断
- 明亮的色彩区分不同功能的区域
- 发光材质突出可交互的Cube

### 视觉反馈
- 速度线/残影效果
- Cube操作时的粒子效果
- 贴墙跑时的特效
- 流畅的角色动画

---

## UI设计

### HUD
- 计时器
- 速度表
- 可操作Cube数量提示
- 简洁的准星/选择指示

### 菜单
- 主菜单
- 关卡选择
- 设置（控制、画质、音效）
- 排行榜（最佳时间）

---

## 开发计划

### 当前状态
- ✅ 基础ECS架构搭建
- ✅ Cube拉伸系统实现
- ✅ 基础选择和高亮系统
- 🚧 角色控制器优化
- 🚧 贴墙跑系统
- 📋 跳跃系统完善
- 📋 关卡设计与实现

### 下一步目标
1. 完善角色控制器，实现流畅的移动
2. 实现完整的贴墙跑系统
3. 优化Cube拉伸/收缩的视觉反馈
4. 设计第一个完整的测试关卡
5. 实现计时和重置系统

---

## 技术要点

### 贴墙跑实现要点
- 墙面检测（Raycast或碰撞体检测）
- 角色朝向调整
- 重力调整（降低或反向）
- 限时机制
- 墙跳触发

### Cube操控优化
- 快速选中系统（射线检测）
- 流畅的拉伸动画
- 实时碰撞更新
- 操作历史记录（用于一键收回）

### 性能优化
- 使用DOTS/ECS管理Cube
- 对象池减少GC
- LOD系统（可选）
- 遮挡剔除

---

## 资源列表

### 模型
- Low-Poly角色模型
- Cube Prefab
- 环境装饰物（可选）

### 材质
- PBR材质
- 发光材质
- 半透明材质（用于预览）

### 音效
- 脚步声
- 跳跃/着地声
- 贴墙跑音效
- Cube操作音效
- 环境音效

### 音乐
- 动感的背景音乐（快节奏）
- 菜单音乐

---

## 版本信息

**当前版本**：0.2 Alpha  
**Unity版本**：2022.3 LTS+  
**使用的包**：
- Unity DOTS/ECS
- Universal Render Pipeline (URP)
- Cinemachine（可选）
- TextMeshPro

---

## 开发笔记

相关技术文档位于 `_Project/Scripts/Core/` 目录下：
- 拉伸系统技术架构
- 输入系统模式切换指南
- 高亮系统实现说明
- 等等...

---

## 网络资源备注

所有使用的第三方资源都将严格遵守其许可协议。

**模型资源**
- PolyPeople Medieval Europe Peasants (Free)

**音效资源**
- （待添加具体来源）

**音乐资源**
- （待添加具体来源）

---

*本项目正在积极开发中，欢迎贡献和反馈！*
